<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Spatial Audio Experience</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nipplejs@0.10.0/dist/nipplejs.min.js"></script>
    <style>
        /* Add these styles to your styles.css file if preferred */
        #title-container {
            position: absolute;
            top: 5%; /* Adjust as needed */
            left: 50%;
            transform: translateX(-50%);
            width: 80%; /* Adjust width */
            max-width: 800px; /* Max width */
            perspective: 400px; /* Adjust perspective depth */
            z-index: 10; /* Ensure it's above other elements if needed */
            pointer-events: none; /* Allow clicks to pass through */
        }

        #title-content {
            transform: rotateX(25deg); /* Adjust angle for the crawl effect */
            transform-origin: top center;
            text-align: center;
            color: #ffcc00; /* Star Wars yellow */
            font-family: sans-serif;
        }

        #title-content h1 {
            font-size: 2.5em; /* Adjust size */
            margin-bottom: 1em;
            font-weight: bold;
        }

        #title-content .description {
            font-size: 1.2em; /* Adjust size */
            line-height: 1.4;
            margin-bottom: 2em;
            /* Add placeholder styling if needed */
            /* border: 1px dashed #ffcc00; */
            /* padding: 1em; */
        }

        #title-content .attributions {
            font-size: 0.9em; /* Adjust size */
            line-height: 1.3;
            /* Add placeholder styling if needed */
            /* border: 1px dashed #ffcc00; */
            /* padding: 0.5em; */
        }
    </style>
</head>
<body>
    <!-- Static Star Wars Style Title -->
    <div id="title-container">
        <div id="title-content">
            <h1>Boulez 3D Visualization Addon</h1>
            <p class="description">
                <!-- EDIT THIS PARAGRAPH: Add a short description of the project or piece here. -->
                This tool provides an immersive experience exploring the spatial aspects of Pierre Boulez's Dialogue de l'ombre double.
            </p>
            <p class="attributions">
                <!-- EDIT ATTRIBUTIONS: Add credits, acknowledgements, or other attributions here. -->
                Developed by James Chang | Foundation provided by Professor Ruthmann
            </p>
        </div>
    </div>

    <div id="immersive-container">
        <div id="scene-container"></div>
        <div id="joystick-container"></div>
        
        <!-- Mode Selection UI -->
        <div class="mode-selector">
            <div class="mode-label">Mode:</div>
            <div class="mode-options">
                <button class="mode-btn active" data-mode="engineer">Audio Engineer</button>
                <button class="mode-btn" data-mode="audience">Audience</button>
                <button class="mode-btn" data-mode="performer">Performer</button>
            </div>
        </div>
        
        <!-- Mix Mode Toggle -->
        <div class="mix-mode-toggle">
            <span>Listen</span>
            <label class="switch">
                <input type="checkbox" id="mixModeToggle">
                <span class="slider round"></span>
            </label>
            <span>Mix</span>
        </div>
        
        <!-- Scene Selection -->
        <div class="scene-selector">
            <button class="scene-btn active" data-scene="default">Default</button>
            <button class="scene-btn" data-scene="transition1-2">Transition 1-2</button>
            <button class="scene-btn" data-scene="transition3-4">Transition 3-4</button>
            <button class="scene-btn" data-scene="stropheV">Strophe V</button>
        </div>
        
        <div class="topdown-view">
            <div class="view-label">2D View</div>
            <canvas id="topdown-canvas"></canvas>
        </div>
        
        <div class="audio-controls">
            <button id="playPauseButton" data-playing="false" title="Play/Pause Audio"></button>
            <button id="resetButton" title="Reset to Beginning"></button>
        </div>
        
        <!-- Trivia Button -->
        <button id="triviaButton" title="Show Information">i</button>
        
        <!-- Trivia Pop-up Container -->
        <div class="trivia-container" style="display: none;">
            <div class="trivia-header">
                <h2>About the Piece</h2>
                <button class="close-trivia">&times;</button>
            </div>
            <div class="trivia-content">
                <!-- Trivia content will be loaded dynamically -->
            </div>
            <div class="trivia-navigation">
                <button class="trivia-nav" data-section="composer">Composer</button>
                <button class="trivia-nav" data-section="piece">The Piece</button>
                <button class="trivia-nav" data-section="technique">Technique</button>
                <button class="trivia-nav" data-section="history">History</button>
            </div>
        </div>
        
        <!-- Contour Display Toggle -->
        <!-- <div class="toggle-contour-view">
            <button data-view="contour" class="active">Contour</button>
            <button data-view="notation">Notation</button>
        </div> -->
        
        <!-- Contour/Notation Display Container
        <div class="music-visualization-container">
            <div class="contour-display active">
                <!-- Contour visualization will be drawn here -->
                <!-- <canvas id="contour-canvas"></canvas>
            </div>
            <div class="notation-display">
                <!-- Notation images will be displayed here -->
                <!-- <div class="notation-scroll"> -->
                    <!-- Notation images will be added dynamically -->
                <!-- </div> -->
            <!-- </div> -->
        <!-- </div> --> 

        <!-- Arabic Visualization Container -->
        <div id="arabic-visualization-container">
            <img id="arabic-visualization-image" src="images/ArabicVisualization.png" alt="Arabic Music Visualization">
            <div id="arabic-playhead"></div>
        </div>
    </div>
    
    <!-- Audio elements -->
    <audio id="double" src="audio/double-clarinet-si.mp3" preload="auto" crossorigin="anonymous"></audio>
    <audio id="transition1-2" src="audio/double-clarinet-si.mp3" preload="auto" crossorigin="anonymous"></audio>
    <audio id="transition3-4" src="audio/double-clarinet-si.mp3" preload="auto" crossorigin="anonymous"></audio>
    <audio id="stropheV" src="audio/double-clarinet-si.mp3" preload="auto" crossorigin="anonymous"></audio>
    
    <script type="module" src="js/3DVisualization.js"></script>
    <script type="module" src="js/AudioVisualizer.js"></script>
    <script src="js/TriviaSections.js"></script>
    <script src="script.js"></script>
</body>
</html>
